<html>
  <head>
  <title>Shadows Over Camelot</title>
  <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css" integrity="sha384-nn4HPE8lTHyVtfCBi5yW9d20FjT8BJwUXyWZT9InLYax14RDjBj46LmSztkmNP9w" crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" href="camelot.css" title="default">
  <meta http-equiv="Default-Style" content="default">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>

<!-- Resources used to capture a photo from the user's camera:
  https://developers.google.com/web/fundamentals/media/capturing-images/
  https://github.com/nschoe/fun-with-WebRTC-part-1/tree/master/1_1_photo_booth (used code as template)
  https://www.nschoe.com/articles/2015-02-14-Lets-Have-Fun-With-WebRTC-Part-1.html
  https://github.com/openrtc-io/awesome-webrtc#demos-and-samples
  https://webrtc.github.io/samples/
  https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API/Taking_still_photos

  Resources used to download image (canvas) as a file, using a button:
  http://weworkweplay.com/play/saving-html5-canvas-as-image/

  Resources used to upload image file via PHP:
  https://www.w3schools.com/php/php_file_upload.asp  (basic upload)
  https://stackoverflow.com/questions/39975706/how-to-change-name-of-a-file-in-php-file-upload (renaming file)

  Resources used to pull in text file and display it:
  https://stackoverflow.com/questions/6348207/making-a-paragraph-in-html-contain-a-text-from-a-file

  Configuing MAMP to work on an iOS device:
  https://www.youtube.com/watch?v=AMukCCPlPIA

  Styling and CSS layout:
  https://www.w3schools.com/css/css_positioning.asp

  Using Javascript to redirect to a new page:
  https://stackoverflow.com/questions/16562577/how-can-i-make-a-button-redirect-my-page-to-another-page

  Using PHP to redirect to a new page:
  https://stackoverflow.com/questions/9541238/how-to-go-to-new-html-page-from-php-script

  Restyling the "Take Photo" input:
  https://stackoverflow.com/questions/1944267/how-to-change-the-button-text-of-input-type-file/36248168#36248168

  Styling the form:
  https://developer.mozilla.org/en-US/docs/Learn/HTML/Forms/Styling_HTML_forms
-->


  <body>
<div id="select-game">
<h1>Select a Game Element</h1>
<button id="excalibur">Excalibur</button>
<button id="siege">Siege Engines</button>
<button id="round-table">Round Table</button>
</div>

<div id="take-picture">
  <div id = "take-photo-button">
  <button id="capture" class="pic">Take a photo</button></div>
  <div id="download-photo-button">
  <a href="#" class="button" id="btn-download" download="camelot-image.png">Download</a></div>
  <div id = "upload-photo-button"><form action="upload.php" method="post" enctype="multipart/form-data">
    Select image to upload (make sure you select the one you just took):
    <input type="file" name="fileToUpload" id="fileToUpload">
    <input type="submit" value="Upload Image" name="submit">
  </form></div>

<video id="player" autoplay width=320 height=240></video>

<canvas id="canvas" width=320 height=240></canvas>
<script>
const player = document.getElementById('player');
const canvas = document.getElementById('canvas');
const context = canvas.getContext('2d');
const captureButton = document.getElementById('capture');
var data = canvas.toDataURL('image/png');

const constraints = {
  video: true,
};

captureButton.addEventListener('click', () => {
  context.drawImage(player, 0, 0, canvas.width, canvas.height);

  // Stop all video streams.
  player.srcObject.getVideoTracks().forEach(track => track.stop());
});

navigator.mediaDevices.getUserMedia(constraints)
  .then((stream) => {
    // Attach the video stream to the video element and autoplay.
    player.srcObject = stream;
  });


</script>

</div>



</div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="camelot.js"></script>
  </body>

<a href="mobile.html">Switch to mobile version</a>

  </html>
